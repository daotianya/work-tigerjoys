<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1,user-scalable=no" />
<title>社区首页 - 蓝蜜蜂</title>
<link rel="stylesheet" href="http://bluebee.b0.upaiyun.com/app/community/community.css" />
<script src="http://bluebee.b0.upaiyun.com/static/js/jquery-1.10.2.min.js"></script>
<script src="http://bluebee.b0.upaiyun.com/static/js/iscroll.4.2.5.js"></script>
<script src="http://bluebee.b0.upaiyun.com/app/news/js/scroll.js"></script>
</head>
<body>
<div class="head">
	<a href="javascript:window.target.clickOnTarget('goback','','');" class="back"></a>
	蜂蜜柚子茶
</div>
<div class="tl bm">	
	<div class="bott">
	   <h4>本期内容：找工作如何防骗</h4>	   
	</div>
	<img src="http://bluebee.b0.upaiyun.com/app/news/images/duanzi_03.jpg" />
	<span class="but"></span>
	<div class="ctrl">
		<div class="left"><span class="time">06:09</span></div>
		<div class="dragbar">
			<span class="bar"></span>	
			<span class="drag" id="drag"></span>	
		</div>
		<div class="right"><span class="time">34:55</span></div>
	</div>
	<div class="progressbar" data-perc="70">
		<div class="bar"></div>
		<div class="label"><span></span></div>
	</div>
	<div class="load" id="loading">
		<div class="animate"></div>
	</div>
	<p class="space">简介：很久很久以前有一座城市，它叫北京。很久很久以前有一座城市，它叫北京。很久很久以前有一座城市，它叫北京。</p>		
</div>
<div class="part">
	<div class="commend">
		<h2 class="bm">最新评论</h2>
		<div id="wrapper">
			<div id="scroller">
				<div id="pullDown">
					<span class="pullDownIcon"></span><span class="pullDownLabel">下拉刷新...</span>
				</div>
				<div class="list">
				    <dl>
						<dt class="c_face"><div class="c_div"><p class="c_p"><img src="http://bluebee.b0.upaiyun.com/app/lmm/images/ad.jpg" /></p></div></dt>
						<dd>
							<h3>小美眉</h3>
							<span class="time">01-09 08:45</span>
							<p>阿萨德卢卡斯的了阿娇塑料袋阿娇塑料袋姐啊三菱电机拉萨京东方拉升阶段</p>
						</dd>
					</dl>
					<dl>
						<dt class="c_face"><div class="c_div"><p class="c_p"><img src="http://bluebee.b0.upaiyun.com/app/lmm/images/ad.jpg" /></p></div></dt>
						<dd>
							<h3>小美眉</h3>
							<p>阿萨德卢卡斯的了阿娇塑料袋阿娇塑料袋姐啊三菱电机拉萨京东方拉升阶段</p>
						</dd>
					</dl>
					<dl>
						<dt class="c_face"><div class="c_div"><p class="c_p"><img src="http://bluebee.b0.upaiyun.com/app/lmm/images/ad.jpg" /></p></div></dt>
						<dd>
							<h3>小美眉</h3>
							<p>阿萨德卢卡斯的了阿娇塑料袋阿娇塑料袋姐啊三菱电机拉萨京东方拉升阶段</p>
						</dd>
					</dl>
					<dl>
						<dt class="c_face"><div class="c_div"><p class="c_p"><img src="http://bluebee.b0.upaiyun.com/app/lmm/images/ad.jpg" /></p></div></dt>
						<dd>
							<h3>小美眉</h3>
							<p>阿萨德卢卡斯的了阿娇塑料袋阿娇塑料袋姐啊三菱电机拉萨京东方拉升阶段</p>
						</dd>
					</dl>
				</div>						
				<div id="pullUp">
					<span class="pullUpIcon"></span><span class="pullUpLabel">上拉加载更多...</span>
				</div>
			</div>	
		</div>	
	</div>
</div>
<div class="part" >
	<div class="box" >
		<input type="button" value="提交" class="btn"/>
		<input type="text" value="" maxlength="200" placeholder="说点什么吧！"  class="txt" />
	</div>
</div>
<script src="http://bluebee.b0.upaiyun.com/static/js/zoom.js"></script>
<script type="text/javascript">

function pullDownAction () {
	window.location.reload();
}
function pullUpAction () {
	if(generatedCount == 1) return;
	generatedCount = 1;
	//$.ajax({
		
	//});
}

$(document).ready(function(){
	var zoom = $("html").css("zoom");
	$("#wrapper").css({"top":$(".tl.bm").height()+$(".head").height()+30+"px"});
	
    $(":text").focus(function(){
		$(".box").css('padding-bottom',$(window).height()/zoom/2);
	});
	$(":text").blur(function(){
		setTimeout("$('.box').css('padding-bottom',10)",10);
	});
	
	//直播音频进度条
	var t = $('.progressbar'),
	dataperc = t.attr('data-perc'),
	barperc = Math.round(dataperc/100*t.width());
	t.find('.bar').animate({width:barperc}, dataperc*25);
	setInterval(perc, 10); 
	function perc(){
		var length = t.find('.bar').width(),
		perc = Math.round(parseInt(length)/t.width()),
		labelpos = (parseInt(length)-16);
		t.find('.label').css('left', labelpos).find('span').text(perc+'%');
	}	
	
	//回放音频按钮
	var h = $(".head").height()+$(".tl .bott").height()+($(".tl img").height()-$(".but").height())/2;
	var w = ($(".tl img").width()-$(".but").width())/2;
	$(".but").css({"top":h+"px","left":w+"px"});	
	var status = 0;
	$(".but").bind("click",function(e){
		var but = $(this);
		e.stopPropagation();
		if(status==0){
			but.css("background-image","url('http://bluebee.b0.upaiyun.com/app/community/stop.png')");
			status = 1;
			return;
		}
		if(status==1){
			but.css("background-image","url('http://bluebee.b0.upaiyun.com/app/community/start.png')");
			status = 0;
			return;
		}		
	});
	$(".ctrl").bind("click",function(e){e.stopPropagation();});
	//回放音频进度条
	var top = $(".head").height()+$(".tl .bott").height()+$(".tl img").height()-$(".ctrl").height()+3;
	$(".ctrl").css({"top":top+"px","left":0+"px"});
	var once = 0;
	$(".tl img").bind("click",function(){
		if(once==1){
			$(".progressbar").hide();
			$(".ctrl,.but").show(800,function(){once = 0;});
		}
	});
	$(document).bind("click",function(){
		if(once==0){
			$(".ctrl,.but").hide(800,function(){
				$(".progressbar").show();
				once = 1;
			});
		}
	});
	//拖拽bar
	var origin = $(".dragbar").position().left;
	
	/*$(".drag").mousedown(function(){
		var drag = $(this);
		var zoom = $("html").css("zoom");
		$(".dragbar").mousemove(function(event){
			var posX = event.clientX/zoom;
			if(posX>=42+11 && posX<=42+211){
				drag.css("left",posX+"px");
				$(".bar").css("width",posX-origin+"px");

			}else{
				if(posX<42+11){
				drag.css("left",42+11+"px");
				$(".bar").css("width",0+"px");
				}
				if(posX>42+211){
					drag.css("left",42+211+"px");
					$(".bar").css("width",211+"px");
				}
			} 						
		});	
	});*/	
	var drag = document.getElementById('drag');
    drag.addEventListener('touchmove', function(event) {
		var drag = $(this);
		event.preventDefault();//阻止其他事件
		// 如果这个元素的位置内只有一个手指的话
		if (event.targetTouches.length == 1) {
			var touch = event.targetTouches[0];  // 把元素放在手指所在的位置
			var posX = touch.pageX/zoom;
			if(posX>=42+11 && posX<=42+211){
				drag.css("left",posX+"px");
				$(".bar").css("width",posX-origin+"px");

			}else{
				if(posX<42+11){
				drag.css("left",42+11+"px");
				$(".bar").css("width",0+"px");
				}
				if(posX>42+211){
					drag.css("left",42+211+"px");
					$(".bar").css("width",211+"px");
				}
			} 
		}
   }, false);
});
</script>

</body>
</html>